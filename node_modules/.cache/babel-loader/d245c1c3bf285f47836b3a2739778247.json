{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\as\\\\Desktop\\\\Parduotuve\\\\hyrosop_veikianti\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\as\\\\Desktop\\\\Parduotuve\\\\hyrosop_veikianti\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useContext,useState}from\"react\";import{useHistory}from\"react-router-dom\";import{LayoutContext}from\"../layout\";import{subTotal,quantity,totalCost}from\"../partials/Mixins\";import{cartListProduct}from\"../partials/FetchApi\";import{getBrainTreeToken,getPaymentProcess}from\"./FetchApi\";import{fetchData,fetchbrainTree,pay}from\"./Action\";import DropIn from\"braintree-web-drop-in-react\";var apiURL=process.env.REACT_APP_API_URL;export var CheckoutComponent=function CheckoutComponent(props){var history=useHistory();var _useContext=useContext(LayoutContext),data=_useContext.data,dispatch=_useContext.dispatch;var _useState=useState({address:\"\",phone:\"\",error:false,success:false,clientToken:null,instance:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];useEffect(function(){fetchData(cartListProduct,dispatch);fetchbrainTree(getBrainTreeToken,setState);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);if(data.loading){return/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-center h-screen\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"w-12 h-12 animate-spin text-gray-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})),\"Please wait untill finish\");}return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"section\",{className:\"mx-4 mt-20 md:mx-12 md:mt-32 lg:mt-24\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-2xl mx-2\"},\"Order\"),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col md:flex md:space-x-2 md:flex-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"md:w-1/2\"},/*#__PURE__*/React.createElement(CheckoutProducts,{products:data.cartProduct})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full order-first md:order-last md:w-1/2\"},state.clientToken!==null?/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{onBlur:function onBlur(e){return setState(_objectSpread(_objectSpread({},state),{},{error:false}));},className:\"p-4 md:p-8\"},state.error?/*#__PURE__*/React.createElement(\"div\",{className:\"bg-red-200 py-2 px-4 rounded\"},state.error):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col py-2\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"address\",className:\"pb-2\"},\"Dalivery Address\"),/*#__PURE__*/React.createElement(\"input\",{value:state.address,onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{address:e.target.value,error:false}));},type:\"text\",id:\"address\",className:\"border px-4 py-2\",placeholder:\"Address...\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col py-2 mb-2\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"phone\",className:\"pb-2\"},\"Phone\"),/*#__PURE__*/React.createElement(\"input\",{value:state.phone,onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{phone:e.target.value,error:false}));},type:\"number\",id:\"phone\",className:\"border px-4 py-2\",placeholder:\"+880\"})),/*#__PURE__*/React.createElement(DropIn,{options:{authorization:state.clientToken,paypal:{flow:\"vault\"}},onInstance:function onInstance(instance){return state.instance=instance;}}),/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(e){return pay(data,dispatch,state,setState,getPaymentProcess,totalCost,history);},className:\"w-full px-4 py-2 text-center text-white font-semibold cursor-pointer\",style:{background:\"#303031\"}},\"Pay now\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-center py-12\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"w-12 h-12 animate-spin text-gray-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})))))));};var CheckoutProducts=function CheckoutProducts(_ref){var products=_ref.products;var history=useHistory();return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"grid grid-cols-2 md:grid-cols-1\"},products!==null&&products.length>0?products.map(function(product,index){return/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"col-span-1 m-2 md:py-6 md:border-t md:border-b md:my-2 md:mx-0 md:flex md:items-center md:justify-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"md:flex md:items-center md:space-x-4\"},/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(e){return history.push(\"/products/\".concat(product._id));},className:\"cursor-pointer md:h-20 md:w-20 object-cover object-center\",src:\"\".concat(apiURL,\"/uploads/products/\").concat(product.pImages[0]),alt:\"wishListproduct\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"text-lg md:ml-6 truncate\"},product.pName),/*#__PURE__*/React.createElement(\"div\",{className:\"md:ml-6 font-semibold text-gray-600 text-sm\"},\"Price : $\",product.pPrice,\".00\",\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"md:ml-6 font-semibold text-gray-600 text-sm\"},\"Quantitiy : \",quantity(product._id)),/*#__PURE__*/React.createElement(\"div\",{className:\"font-semibold text-gray-600 text-sm\"},\"Subtotal : $\",subTotal(product._id,product.pPrice),\".00\")));}):/*#__PURE__*/React.createElement(\"div\",null,\"No product found for checkout\")));};export default CheckoutProducts;","map":{"version":3,"names":["React","Fragment","useEffect","useContext","useState","useHistory","LayoutContext","subTotal","quantity","totalCost","cartListProduct","getBrainTreeToken","getPaymentProcess","fetchData","fetchbrainTree","pay","DropIn","apiURL","process","env","REACT_APP_API_URL","CheckoutComponent","props","history","data","dispatch","address","phone","error","success","clientToken","instance","state","setState","loading","cartProduct","e","target","value","authorization","paypal","flow","background","CheckoutProducts","products","length","map","product","index","push","_id","pImages","pName","pPrice"],"sources":["C:/Users/as/Desktop/Parduotuve/hyrosop_veikianti/client/src/components/shop/order/CheckoutProducts.js"],"sourcesContent":["import React, { Fragment, useEffect, useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { LayoutContext } from \"../layout\";\nimport { subTotal, quantity, totalCost } from \"../partials/Mixins\";\n\nimport { cartListProduct } from \"../partials/FetchApi\";\nimport { getBrainTreeToken, getPaymentProcess } from \"./FetchApi\";\nimport { fetchData, fetchbrainTree, pay } from \"./Action\";\n\nimport DropIn from \"braintree-web-drop-in-react\";\n\nconst apiURL = process.env.REACT_APP_API_URL;\n\nexport const CheckoutComponent = (props) => {\n  const history = useHistory();\n  const { data, dispatch } = useContext(LayoutContext);\n\n  const [state, setState] = useState({\n    address: \"\",\n    phone: \"\",\n    error: false,\n    success: false,\n    clientToken: null,\n    instance: {},\n  });\n\n  useEffect(() => {\n    fetchData(cartListProduct, dispatch);\n    fetchbrainTree(getBrainTreeToken, setState);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (data.loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <svg\n          className=\"w-12 h-12 animate-spin text-gray-600\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"2\"\n            d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n          ></path>\n        </svg>\n        Please wait untill finish\n      </div>\n    );\n  }\n  return (\n    <Fragment>\n      <section className=\"mx-4 mt-20 md:mx-12 md:mt-32 lg:mt-24\">\n        <div className=\"text-2xl mx-2\">Order</div>\n        {/* Product List */}\n        <div className=\"flex flex-col md:flex md:space-x-2 md:flex-row\">\n          <div className=\"md:w-1/2\">\n            <CheckoutProducts products={data.cartProduct} />\n          </div>\n          <div className=\"w-full order-first md:order-last md:w-1/2\">\n            {state.clientToken !== null ? (\n              <Fragment>\n                <div\n                  onBlur={(e) => setState({ ...state, error: false })}\n                  className=\"p-4 md:p-8\"\n                >\n                  {state.error ? (\n                    <div className=\"bg-red-200 py-2 px-4 rounded\">\n                      {state.error}\n                    </div>\n                  ) : (\n                    \"\"\n                  )}\n                  <div className=\"flex flex-col py-2\">\n                    <label htmlFor=\"address\" className=\"pb-2\">\n                      Dalivery Address\n                    </label>\n                    <input\n                      value={state.address}\n                      onChange={(e) =>\n                        setState({\n                          ...state,\n                          address: e.target.value,\n                          error: false,\n                        })\n                      }\n                      type=\"text\"\n                      id=\"address\"\n                      className=\"border px-4 py-2\"\n                      placeholder=\"Address...\"\n                    />\n                  </div>\n                  <div className=\"flex flex-col py-2 mb-2\">\n                    <label htmlFor=\"phone\" className=\"pb-2\">\n                      Phone\n                    </label>\n                    <input\n                      value={state.phone}\n                      onChange={(e) =>\n                        setState({\n                          ...state,\n                          phone: e.target.value,\n                          error: false,\n                        })\n                      }\n                      type=\"number\"\n                      id=\"phone\"\n                      className=\"border px-4 py-2\"\n                      placeholder=\"+880\"\n                    />\n                  </div>\n                  <DropIn\n                    options={{\n                      authorization: state.clientToken,\n                      paypal: {\n                        flow: \"vault\",\n                      },\n                    }}\n                    onInstance={(instance) => (state.instance = instance)}\n                  />\n                  <div\n                    onClick={(e) =>\n                      pay(\n                        data,\n                        dispatch,\n                        state,\n                        setState,\n                        getPaymentProcess,\n                        totalCost,\n                        history\n                      )\n                    }\n                    className=\"w-full px-4 py-2 text-center text-white font-semibold cursor-pointer\"\n                    style={{ background: \"#303031\" }}\n                  >\n                    Pay now\n                  </div>\n                </div>\n              </Fragment>\n            ) : (\n              <div className=\"flex items-center justify-center py-12\">\n                <svg\n                  className=\"w-12 h-12 animate-spin text-gray-600\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth=\"2\"\n                    d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n                  ></path>\n                </svg>\n              </div>\n            )}\n          </div>\n        </div>\n      </section>\n    </Fragment>\n  );\n};\n\nconst CheckoutProducts = ({ products }) => {\n  const history = useHistory();\n\n  return (\n    <Fragment>\n      <div className=\"grid grid-cols-2 md:grid-cols-1\">\n        {products !== null && products.length > 0 ? (\n          products.map((product, index) => {\n            return (\n              <div\n                key={index}\n                className=\"col-span-1 m-2 md:py-6 md:border-t md:border-b md:my-2 md:mx-0 md:flex md:items-center md:justify-between\"\n              >\n                <div className=\"md:flex md:items-center md:space-x-4\">\n                  <img\n                    onClick={(e) => history.push(`/products/${product._id}`)}\n                    className=\"cursor-pointer md:h-20 md:w-20 object-cover object-center\"\n                    src={`${apiURL}/uploads/products/${product.pImages[0]}`}\n                    alt=\"wishListproduct\"\n                  />\n                  <div className=\"text-lg md:ml-6 truncate\">\n                    {product.pName}\n                  </div>\n                  <div className=\"md:ml-6 font-semibold text-gray-600 text-sm\">\n                    Price : ${product.pPrice}.00{\" \"}\n                  </div>\n                  <div className=\"md:ml-6 font-semibold text-gray-600 text-sm\">\n                    Quantitiy : {quantity(product._id)}\n                  </div>\n                  <div className=\"font-semibold text-gray-600 text-sm\">\n                    Subtotal : ${subTotal(product._id, product.pPrice)}.00\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        ) : (\n          <div>No product found for checkout</div>\n        )}\n      </div>\n    </Fragment>\n  );\n};\n\nexport default CheckoutProducts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}